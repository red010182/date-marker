(function(e,z){typeof exports=="object"&&typeof module<"u"?module.exports=z(require("vue")):typeof define=="function"&&define.amd?define(["vue"],z):(e=typeof globalThis<"u"?globalThis:e||self,e.DateMarker=z(e.Vue))})(this,function(e){"use strict";var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function re(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var ne={exports:{}};(function(m,b){(function(S,y){m.exports=y()})(z,function(){var S=1e3,y=6e4,Y=36e5,L="millisecond",E="second",p="minute",O="hour",k="day",j="week",M="month",Q="quarter",N="year",C="date",x="Invalid Date",R=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ee=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var r=["th","st","nd","rd"],t=n%100;return"["+n+(r[(t-20)%10]||r[t]||r[0])+"]"}},q=function(n,r,t){var a=String(n);return!a||a.length>=r?n:""+Array(r+1-a.length).join(t)+n},te={s:q,z:function(n){var r=-n.utcOffset(),t=Math.abs(r),a=Math.floor(t/60),s=t%60;return(r<=0?"+":"-")+q(a,2,"0")+":"+q(s,2,"0")},m:function n(r,t){if(r.date()<t.date())return-n(t,r);var a=12*(t.year()-r.year())+(t.month()-r.month()),s=r.clone().add(a,M),i=t-s<0,c=r.clone().add(a+(i?-1:1),M);return+(-(a+(t-s)/(i?s-c:c-s))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M,y:N,w:j,d:k,D:C,h:O,m:p,s:E,ms:L,Q}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},F="en",V={};V[F]=A;var K="$isDayjsObject",U=function(n){return n instanceof l||!(!n||!n[K])},J=function n(r,t,a){var s;if(!r)return F;if(typeof r=="string"){var i=r.toLowerCase();V[i]&&(s=i),t&&(V[i]=t,s=i);var c=r.split("-");if(!s&&c.length>1)return n(c[0])}else{var u=r.name;V[u]=r,s=u}return!a&&s&&(F=s),s||!a&&F},f=function(n,r){if(U(n))return n.clone();var t=typeof r=="object"?r:{};return t.date=n,t.args=arguments,new l(t)},o=te;o.l=J,o.i=U,o.w=function(n,r){return f(n,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var l=function(){function n(t){this.$L=J(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[K]=!0}var r=n.prototype;return r.parse=function(t){this.$d=function(a){var s=a.date,i=a.utc;if(s===null)return new Date(NaN);if(o.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var c=s.match(R);if(c){var u=c[2]-1||0,h=(c[7]||"0").substring(0,3);return i?new Date(Date.UTC(c[1],u,c[3]||1,c[4]||0,c[5]||0,c[6]||0,h)):new Date(c[1],u,c[3]||1,c[4]||0,c[5]||0,c[6]||0,h)}}return new Date(s)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return o},r.isValid=function(){return this.$d.toString()!==x},r.isSame=function(t,a){var s=f(t);return this.startOf(a)<=s&&s<=this.endOf(a)},r.isAfter=function(t,a){return f(t)<this.startOf(a)},r.isBefore=function(t,a){return this.endOf(a)<f(t)},r.$g=function(t,a,s){return o.u(t)?this[a]:this.set(s,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,a){var s=this,i=!!o.u(a)||a,c=o.p(t),u=function(I,g){var T=o.w(s.$u?Date.UTC(s.$y,g,I):new Date(s.$y,g,I),s);return i?T:T.endOf(k)},h=function(I,g){return o.w(s.toDate()[I].apply(s.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(g)),s)},$=this.$W,_=this.$M,w=this.$D,Z="set"+(this.$u?"UTC":"");switch(c){case N:return i?u(1,0):u(31,11);case M:return i?u(1,_):u(0,_+1);case j:var H=this.$locale().weekStart||0,P=($<H?$+7:$)-H;return u(i?w-P:w+(6-P),_);case k:case C:return h(Z+"Hours",0);case O:return h(Z+"Minutes",1);case p:return h(Z+"Seconds",2);case E:return h(Z+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,a){var s,i=o.p(t),c="set"+(this.$u?"UTC":""),u=(s={},s[k]=c+"Date",s[C]=c+"Date",s[M]=c+"Month",s[N]=c+"FullYear",s[O]=c+"Hours",s[p]=c+"Minutes",s[E]=c+"Seconds",s[L]=c+"Milliseconds",s)[i],h=i===k?this.$D+(a-this.$W):a;if(i===M||i===N){var $=this.clone().set(C,1);$.$d[u](h),$.init(),this.$d=$.set(C,Math.min(this.$D,$.daysInMonth())).$d}else u&&this.$d[u](h);return this.init(),this},r.set=function(t,a){return this.clone().$set(t,a)},r.get=function(t){return this[o.p(t)]()},r.add=function(t,a){var s,i=this;t=Number(t);var c=o.p(a),u=function(_){var w=f(i);return o.w(w.date(w.date()+Math.round(_*t)),i)};if(c===M)return this.set(M,this.$M+t);if(c===N)return this.set(N,this.$y+t);if(c===k)return u(1);if(c===j)return u(7);var h=(s={},s[p]=y,s[O]=Y,s[E]=S,s)[c]||1,$=this.$d.getTime()+t*h;return o.w($,this)},r.subtract=function(t,a){return this.add(-1*t,a)},r.format=function(t){var a=this,s=this.$locale();if(!this.isValid())return s.invalidDate||x;var i=t||"YYYY-MM-DDTHH:mm:ssZ",c=o.z(this),u=this.$H,h=this.$m,$=this.$M,_=s.weekdays,w=s.months,Z=s.meridiem,H=function(g,T,G,X){return g&&(g[T]||g(a,i))||G[T].slice(0,X)},P=function(g){return o.s(u%12||12,g,"0")},I=Z||function(g,T,G){var X=g<12?"AM":"PM";return G?X.toLowerCase():X};return i.replace(ee,function(g,T){return T||function(G){switch(G){case"YY":return String(a.$y).slice(-2);case"YYYY":return o.s(a.$y,4,"0");case"M":return $+1;case"MM":return o.s($+1,2,"0");case"MMM":return H(s.monthsShort,$,w,3);case"MMMM":return H(w,$);case"D":return a.$D;case"DD":return o.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return H(s.weekdaysMin,a.$W,_,2);case"ddd":return H(s.weekdaysShort,a.$W,_,3);case"dddd":return _[a.$W];case"H":return String(u);case"HH":return o.s(u,2,"0");case"h":return P(1);case"hh":return P(2);case"a":return I(u,h,!0);case"A":return I(u,h,!1);case"m":return String(h);case"mm":return o.s(h,2,"0");case"s":return String(a.$s);case"ss":return o.s(a.$s,2,"0");case"SSS":return o.s(a.$ms,3,"0");case"Z":return c}return null}(g)||c.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,a,s){var i,c=this,u=o.p(a),h=f(t),$=(h.utcOffset()-this.utcOffset())*y,_=this-h,w=function(){return o.m(c,h)};switch(u){case N:i=w()/12;break;case M:i=w();break;case Q:i=w()/3;break;case j:i=(_-$)/6048e5;break;case k:i=(_-$)/864e5;break;case O:i=_/Y;break;case p:i=_/y;break;case E:i=_/S;break;default:i=_}return s?i:o.a(i)},r.daysInMonth=function(){return this.endOf(M).$D},r.$locale=function(){return V[this.$L]},r.locale=function(t,a){if(!t)return this.$L;var s=this.clone(),i=J(t,a,!0);return i&&(s.$L=i),s},r.clone=function(){return o.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},n}(),d=l.prototype;return f.prototype=d,[["$ms",L],["$s",E],["$m",p],["$H",O],["$W",k],["$M",M],["$y",N],["$D",C]].forEach(function(n){d[n[1]]=function(r){return this.$g(r,n[0],n[1])}}),f.extend=function(n,r){return n.$i||(n(r,l,f),n.$i=!0),f},f.locale=J,f.isDayjs=U,f.unix=function(n){return f(1e3*n)},f.en=V[F],f.Ls=V,f.p={},f})})(ne);var se=ne.exports;const v=re(se);function oe(m,b){const S=[];for(let y=0;y<m.length;y+=b)S.push(m.slice(y,y+b));return S}const W=m=>(e.pushScopeId("data-v-2b5afeeb"),m=m(),e.popScopeId(),m),ae={class:"mt-8 relative w-120"},le={class:"text-left"},ie={class:"text-lg p-4 border"},ce=W(()=>e.createElementVNode("div",null,"快速選擇",-1)),de=W(()=>e.createElementVNode("span",{class:"ml-1"},"從",-1)),ue=["value"],fe=W(()=>e.createElementVNode("span",{class:"mx-1"},"到",-1)),he=["value"],me=W(()=>e.createElementVNode("span",{class:"mx-1"},"的",-1)),pe=["value"],$e={class:"space-x-2 ml-4 text-sm"},ye={class:"year-box row flex items-center"},_e={class:"year-cell"},ge={class:"year-cell"},ke={class:"next-year"},Me={class:"mr-2"},De=W(()=>e.createElementVNode("div",{class:"line"},null,-1)),we={class:"year-cell"},be={class:"year"},Se={class:"ml-2"},Ee={class:"year-cell"},Ne={class:"row flex"},Ve=W(()=>e.createElementVNode("div",{class:"col cell"},null,-1)),Ce=["onClick"],Be=["onClick"],Le=["onClick"],B=31,D=12;return((m,b)=>{const S=m.__vccOpts||m;for(const[y,Y]of b)S[y]=Y;return S})(e.defineComponent({__name:"DateMarker",props:{weekdayLabels:null,monthLabels:null,dayLabels:null,notDisplayWeekdayInCell:{type:Boolean},disableDates:null},setup(m){const b=m,S=v(),y=e.ref(new Array(B*D).fill(!1)),Y=e.ref(new Array(B*D).fill("")),L=e.ref(new Array(B).fill(!1)),E=e.ref(new Array(D).fill(!1)),p=e.ref({fromMonth:1,toMonth:12,weekday:1}),O=e.ref(b.notDisplayWeekdayInCell),k=e.ref(b.weekdayLabels??["一","二","三","四","五","六","日"]),j=e.ref(b.monthLabels??["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]),M=e.ref(b.dayLabels??["1日","2日","3日","4日","5日","6日","7日","8日","9日","10日","11日","12日","13日","14日","15日","16日","17日","18日","19日","20日","21日","22日","23日","24日","25日","26日","27日","28日","29日","30日","31日"]),Q=e.ref(b.disableDates??[]),N=e.computed(()=>oe(y.value,D)),C=e.computed(()=>S.format("YYYY-MM-DD")),x=e.computed(()=>+C.value.substring(0,4)),R=e.computed(()=>+C.value.substring(5,7));e.computed(()=>+C.value.substring(8,10));const ee=(o,l)=>{if(o>=0&&o<B&&l>=0&&l<D)return y.value[o*D+l]},A=(o,l,d)=>{o>=0&&o<B&&l>=0&&l<D&&!V(o,l)&&(y.value[o*D+l]=d)},q=(o,l)=>{A(o,l,!ee(o,l))},te=o=>{E.value[o]=!E.value[o];for(let l=0;l<B;l++)A(l,o,E.value[o])},F=o=>{L.value[o]=!L.value[o];for(let l=0;l<D;l++)A(o,l,L.value[o])},V=(o,l)=>{const d=`${l+1}/${o+1}`;return Q.value.concat(["2/30","2/31","4/31","6/31","9/31","11/31"]).includes(d)},K=(o,l)=>O.value||V(o,l)?"":k.value[v(`${x}-${l+1}-${o+1}`).day()],U=async o=>{console.log("weekSelector",p.value,o);const l=k.value[p.value.weekday];for(let d=0;d<B;d++)for(let n=p.value.fromMonth;n<=p.value.toMonth;n++)Y.value[d*D+n]===l&&A(d,n,o)},J=()=>{for(let o=0;o<B;o++)for(let l=0;l<D;l++)Y.value[o*D+l]=k.value[v(`${x}-${l+1}-${o+1}`).day()]},f=()=>{y.value.fill(!1),L.value.fill(!1),E.value.fill(!1),p.value={fromMonth:1,toMonth:12,weekday:1},J()};return f(),(o,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{class:"text-left"},[e.createElementVNode("div",{class:"btn",onClick:f},"Clear")]),e.createElementVNode("div",ae,[e.createElementVNode("div",le,[e.createElementVNode("div",ie,[ce,de,e.withDirectives(e.createElementVNode("select",{class:"border","onUpdate:modelValue":l[0]||(l[0]=d=>e.unref(p).fromMonth=d)},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(12,(d,n)=>e.createElementVNode("option",{value:n},e.toDisplayString(n+1)+"月",9,ue)),64))],512),[[e.vModelSelect,e.unref(p).fromMonth]]),fe,e.withDirectives(e.createElementVNode("select",{class:"border","onUpdate:modelValue":l[1]||(l[1]=d=>e.unref(p).toMonth=d)},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(12,(d,n)=>e.createElementVNode("option",{value:n},e.toDisplayString(n+1)+"月",9,he)),64))],512),[[e.vModelSelect,e.unref(p).toMonth]]),me,e.withDirectives(e.createElementVNode("select",{class:"border","onUpdate:modelValue":l[2]||(l[2]=d=>e.unref(p).weekday=d)},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(7,(d,n)=>e.createElementVNode("option",{value:n},"周"+e.toDisplayString(e.unref(k)[n]),9,pe)),64))],512),[[e.vModelSelect,e.unref(p).weekday]]),e.createElementVNode("span",$e,[e.createElementVNode("div",{class:"btn",onClick:l[3]||(l[3]=d=>U(!1))},"取消"),e.createElementVNode("div",{class:"btn",onClick:l[4]||(l[4]=d=>U(!0))},"打勾")])])]),e.createElementVNode("div",ye,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(R)-1,d=>(e.openBlock(),e.createElementBlock("div",_e))),256)),e.createElementVNode("div",ge,[e.createElementVNode("div",ke,[e.createElementVNode("span",Me,e.toDisplayString(e.unref(x)+1),1)])]),De,e.createElementVNode("div",we,[e.createElementVNode("div",be,[e.createElementVNode("span",Se,e.toDisplayString(e.unref(x)),1)])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(12-e.unref(R),d=>(e.openBlock(),e.createElementBlock("div",Ee))),256))]),e.createElementVNode("div",Ne,[Ve,(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(12,(d,n)=>e.createElementVNode("div",{class:"col cell",onClick:r=>te(n)},e.toDisplayString(e.unref(j)[n]),9,Ce)),64))]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(N),(d,n)=>(e.openBlock(),e.createElementBlock("div",{class:"row flex",key:n},[e.createElementVNode("div",{class:"col cell",onClick:r=>F(n)},e.toDisplayString(e.unref(M)[n]),9,Be),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d,(r,t)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["col cell",{active:e.unref(N)[n][t],disabled:V(n,t)}]),onClick:a=>q(n,t)},e.toDisplayString(K(n,t)),11,Le))),256))]))),128))])],64))}}),[["__scopeId","data-v-2b5afeeb"]])});
